<!DOCTYPE html>
<!-- HTML5 Hello world by kirupa - http://www.kirupa.com/html5/getting_your_feet_wet_html5_pg1.htm -->
<html lang="en-us" ng-app="hero">
    <head>
        <meta charset="utf-8">
        <title>Become a web hero!</title>
        <link rel="stylesheet" href="components/codemirror/lib/codemirror.css" />
        <link rel="stylesheet" href="components/codemirror/theme/ambiance.css" />
        <link rel="stylesheet" href="main.css" />
        <script src="components/codemirror/lib/codemirror.js"></script>
        <script src="components/codemirror/mode/xml/xml.js"></script>
        <script src="components/codemirror/mode/javascript/javascript.js"></script>
        <script src="components/codemirror/mode/css/css.js"></script>
        <script src="components/codemirror/mode/htmlmixed/htmlmixed.js"></script>
        <script src="components/angular/angular.min.js"></script>
        <script src="main.js"></script>
    </head>
    <body>
        <div id="lesson" class="column" ng-view></div>
        <div id="editor" class="column">
            <textarea id="code">
<!doctype html>
<html>
    <head>
        <script>
            // Javascript goes here
        </script>
        <style>
            /* CSS goes here */
        </style>
    </head>
    <body>
        <h1>Hello World!</h1>
        <div>Change the web!</div>
    </body>
</html>
            </textarea>
        </div>
        <iframe id="preview" class="column"></iframe>
        <script> 
      var delay;
      // Initialize CodeMirror editor with a nice html5 canvas demo.
      var editor = CodeMirror.fromTextArea(document.getElementById('code'), {
        mode: 'text/html',
        tabMode: 'indent',
        theme: "ambiance"
      });
      editor.on("change", function() {
        clearTimeout(delay);
        delay = setTimeout(updatePreview, 300);
      });
      
      function updatePreview() {
        var previewFrame = document.getElementById('preview');
        var preview =  previewFrame.contentDocument ||  previewFrame.contentWindow.document;
        preview.open();
        preview.write(editor.getValue());
        preview.close();
      }
      setTimeout(updatePreview, 300);
        </script>
    </body>
</html>
